<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Discover - Groupie Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,300&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="/static/css/discover.css"/>
    <link rel="stylesheet" href="/static/css/artist-card.css"/>
</head>
<body>

{{template "navbar" .}}

<div class="discover-layout">

    {{template "filter-sidebar" .}}

    <div class="filter-overlay" id="filterOverlay" hidden></div>

    <main class="discover-main">

        <div class="discover-topbar">
            <div class="discover-topbar-left">
                <button type="button" class="mobile-filter-btn" id="mobileFilterBtn">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2a1 1 0 01-.293.707L13 13.414V19a1 1 0 01-.553.894l-4 2A1 1 0 017 21v-7.586L3.293 6.707A1 1 0 013 6V4z"/>
                    </svg>
                    Filters
                    <span class="mobile-filter-badge" id="filterBadge" hidden>0</span>
                </button>
                <div class="discover-results-info">
                    <h1 class="discover-title">Discover Artists</h1>
                    <span class="discover-count" id="resultsCount">
                        {{if .Artists}}{{len .Artists}} artists found{{else}}Search or apply filters to explore{{end}}
                    </span>
                </div>
            </div>

            <div class="discover-topbar-right">
                <div class="sort-wrap">
                    <label for="sortSelect" class="sort-label">Sort by</label>
                    <div class="sort-select-wrap">
                        <select class="sort-select" id="sortSelect">
                            <option value="relevance">Relevance</option>
                            <option value="popularity">Most Popular</option>
                            <option value="followers">Most Followed</option>
                            <option value="name">A to Z</option>
                        </select>
                        <svg class="sort-chevron" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </div>
                </div>

                <div class="view-toggle">
                    <button type="button" class="view-btn active" id="gridViewBtn" aria-label="Grid view">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="7" height="7" rx="1"/>
                            <rect x="14" y="3" width="7" height="7" rx="1"/>
                            <rect x="3" y="14" width="7" height="7" rx="1"/>
                            <rect x="14" y="14" width="7" height="7" rx="1"/>
                        </svg>
                    </button>
                    <button type="button" class="view-btn" id="listViewBtn" aria-label="List view">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        {{/* Error state */}}
        {{if .Error}}
        <div class="discover-empty-state">
            <div class="empty-state-visual">
                <div class="empty-state-icon">
                    <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                    </svg>
                </div>
            </div>
            <h2 class="empty-state-title">Something went wrong</h2>
            <p class="empty-state-subtitle">{{.Error}}</p>
        </div>

        {{/* Empty state - no artists loaded yet */}}
        {{else if not .Artists}}
        <div class="discover-empty-state" id="emptyState">
            <div class="empty-state-visual">
                <div class="empty-state-ring ring-1"></div>
                <div class="empty-state-ring ring-2"></div>
                <div class="empty-state-ring ring-3"></div>
                <div class="empty-state-icon">
                    <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
                    </svg>
                </div>
            </div>
            <h2 class="empty-state-title">Find Your Next Favourite Artist</h2>
            <p class="empty-state-subtitle">Search by name, browse by genre, or use filters to discover music you love.</p>
            <div class="empty-state-suggestions">
                <span class="suggestion-label">Try searching for</span>
                <div class="suggestion-chips">
                    <button type="button" class="suggestion-chip" data-query="The Beatles">The Beatles</button>
                    <button type="button" class="suggestion-chip" data-query="Kendrick Lamar">Kendrick Lamar</button>
                    <button type="button" class="suggestion-chip" data-query="Daft Punk">Daft Punk</button>
                    <button type="button" class="suggestion-chip" data-query="Taylor Swift">Taylor Swift</button>
                </div>
            </div>
        </div>

        {{/* Artists grid */}}
        {{else}}
        <div class="artist-grid" id="artistGrid">
            {{template "artist-card" .}}
        </div>

        <div class="discover-no-results" id="noResults" hidden>
            <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <h3>No artists found</h3>
            <p>Try adjusting your search or filters</p>
            <button type="button" class="no-results-reset" id="resetFiltersBtn">Clear all filters</button>
        </div>
        {{end}}

    </main>
</div>

<script src="/static/js/discover.js"></script>
<script src="/static/js/artist-card.js"></script>
</body>
</html>