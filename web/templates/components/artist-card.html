{{define "artist-card"}}
{{range .Artists}}
<article
        class="artist-card"
        data-id="{{.ID}}"
        data-popularity="{{.Popularity}}"
        data-genres="{{range .Genres}}{{.}},{{end}}"
>
  {{/* Image: aspect-square, hover scale */}}
  <a href="/artist/{{.ID}}" class="artist-card-img-link">
    <div class="artist-card-img-wrap">
      <img
              src="{{if .Image}}{{.Image}}{{else}}/static/img/placeholder.svg{{end}}"
              alt="{{.Name}}"
              class="artist-card-img"
              loading="lazy"
      />
      <div class="artist-card-img-overlay"></div>
    </div>
  </a>

  {{/* Card body: p-4 */}}
  <div class="artist-card-body">

    {{/* Artist name: text-lg font-semibold hover:text-primary truncate */}}
    <a href="/artist/{{.ID}}" class="artist-card-name-link">
      <h3 class="artist-card-name">{{.Name}}</h3>
    </a>

    {{/* Genre badges: px-2 py-0.5 rounded-full bg-secondary text-xs */}}
    <div class="artist-card-genres">
      {{range $i, $g := .Genres}}
      {{if lt $i 2}}
      <span class="artist-card-genre">{{$g}}</span>
      {{end}}
      {{end}}
    </div>

    {{/* Top Tracks */}}
    <div class="artist-card-tracks">
      <p class="artist-card-tracks-label">Top Tracks:</p>
      <ul class="artist-card-track-list">
        {{range .TopTracks}}
        <li class="artist-card-track" data-preview="{{.PreviewURL}}" data-track-id="{{.ID}}">
          {{/* Play/pause button: w-7 h-7 rounded-full bg-secondary hover:bg-accent hover:text-white */}}
          <button
                  type="button"
                  class="artist-card-play-btn"
                  aria-label="Play {{.Name}}"
                  onclick="toggleTrackPlay(this)"
          >
            {{/* Play icon (default state) */}}
            <svg class="icon-play" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <polygon points="5,3 19,12 5,21" fill="currentColor" stroke="none"/>
            </svg>
            {{/* Pause icon (playing state, hidden by default) */}}
            <svg class="icon-pause" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" hidden>
              <rect x="6" y="4" width="4" height="16" fill="currentColor" stroke="none"/>
              <rect x="14" y="4" width="4" height="16" fill="currentColor" stroke="none"/>
            </svg>
          </button>
          <span class="artist-card-track-name">{{.Name}}</span>
          <span class="artist-card-track-duration">{{.Duration}}</span>
        </li>
        {{end}}
        {{/* Show placeholder rows if fewer than 3 tracks */}}
        {{if eq (len .TopTracks) 0}}
        <li class="artist-card-track artist-card-track--empty">
          <span class="artist-card-track-name" style="color:var(--muted-foreground)">No tracks available</span>
        </li>
        {{end}}
      </ul>
    </div>

    {{/* View Profile button: w-full bg-gradient-to-r from-primary to-accent */}}
    <a href="/artist/{{.ID}}" class="artist-card-btn">
      View Profile
    </a>

  </div>
</article>
{{end}}
{{end}}